"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[676],{3134:function(t,s,e){e.d(s,{Z:function(){return l}});var a=function(){var t=this,s=t._self._c;return s("b-modal",{attrs:{id:"no-auth","hide-header":"","hide-footer":""}},[s("div",{staticClass:"w-75 my-5 mx-auto"},[s("p",{staticClass:"mb-4 h4",staticStyle:{"text-align":"center"}},[t._v("You must be logged in to "),s("b-icon-heart-fill",{staticStyle:{color:"#F91880"}}),t._v(" a message ")],1),s("p",{staticStyle:{"font-weight":"300"}},[t._v(" Sign up or sign in ")]),s("router-link",{staticClass:"w-100 modal-btn mb-2 text-center",attrs:{to:"/signup"}},[t._v(" Sign up ")]),s("router-link",{staticClass:"w-100 modal-btn text-center",attrs:{to:"/signin"}},[t._v(" Sign in ")])],1)])},i=[],n=e(1001),r={},o=(0,n.Z)(r,a,i,!1,null,"3d740b34",null),l=o.exports},9018:function(t,s,e){e.r(s),e.d(s,{default:function(){return d}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"mx-auto vh-100"},[t._m(0),s("span",[s("UserBtn",{attrs:{user:this.user}})],1),s("div",{staticClass:"bordered-top mt-3"},[s("p",{staticClass:"mt-3",staticStyle:{"font-weight":"800"}},[t._v(" "+t._s(t.message.text)+" ")]),s("div",{staticClass:"bordered-top"},[s("p",[t._v(" On "+t._s(t.message.date.split("T")[0])+" at "+t._s(t.message.date.split("T")[1].split(":")[0])+":"+t._s(t.message.date.split("T")[1].split(":")[1])+" ")]),s("Like",{attrs:{message:t.message},on:{"liked-event":t.reloadData,"unliked-event":t.reloadData,"auth-event":t.showModal}})],1)]),s("AuthModal")],1)},i=[function(){var t=this,s=t._self._c;return s("span",[s("h1",{staticClass:"display-4"},[t._v("Message")])])}],n=(e(7658),e(1423)),r=e(3134),o=e(8351),l={data(){return{user:{},message:{}}},components:{Like:n.Z,AuthModal:r.Z,UserBtn:o.Z},watch:{"$route.query":{handler(t){this.user={},this.fetchUser(t.userId),this.fetchMessage(t.userId,t.messageId)},immediate:!0}},methods:{async fetchUser(t){const s=await fetchApi("/social/users/"+t,{method:"GET",headers:{"Content-Type":"application/json"}});if(s.ok){let t=await s.json();this.user=t.user}else this.$router.push({path:"/error"}).catch((()=>{}))},async fetchMessage(t,s){const e=await fetchApi("/social/messages/"+t+"/"+s,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){let t=await e.json();this.message=t.message}else this.$router.push({path:"/error"}).catch((()=>{}))},async reloadData(){await this.fetchMessage(this.user.id,this.message.id)},showModal(){this.$bvModal.show("no-auth")}}},h=l,u=e(1001),c=(0,u.Z)(h,a,i,!1,null,null,null),d=c.exports}}]);
//# sourceMappingURL=message.800114b9.js.map