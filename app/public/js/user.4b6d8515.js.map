{"version":3,"file":"js/user.4b6d8515.js","mappings":"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","sources":["webpack://frontend/./src/components/AuthModal.vue","webpack://frontend/./src/components/AuthModal.vue?2281","webpack://frontend/./src/views/User.vue","webpack://frontend/src/views/User.vue","webpack://frontend/./src/views/User.vue?ac75","webpack://frontend/./src/views/User.vue?898b"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-modal',{attrs:{\"id\":\"no-auth\",\"hide-header\":\"\",\"hide-footer\":\"\"}},[_c('div',{staticClass:\"w-75 my-5 mx-auto\"},[_c('p',{staticClass:\"mb-4 h4\",staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"You must be logged in to \"),_c('b-icon-heart-fill',{staticStyle:{\"color\":\"#F91880\"}}),_vm._v(\" a message \")],1),_c('p',{staticStyle:{\"font-weight\":\"300\"}},[_vm._v(\" Sign up or sign in \")]),_c('router-link',{staticClass:\"w-100 modal-btn mb-2 text-center\",attrs:{\"to\":\"/signup\"}},[_vm._v(\" Sign up \")]),_c('router-link',{staticClass:\"w-100 modal-btn text-center\",attrs:{\"to\":\"/signin\"}},[_vm._v(\" Sign in \")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./AuthModal.vue?vue&type=template&id=3d740b34&scoped=true&\"\nvar script = {}\nimport style0 from \"./AuthModal.vue?vue&type=style&index=0&id=3d740b34&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d740b34\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mx-auto vh-100\"},[_c('div',[_c('h1',{staticClass:\"display-4\"},[_vm._v(_vm._s(this.user.name)+\" \"+_vm._s(this.user.surname))]),_c('div',[_c('h4',[_vm._v(\"@\"+_vm._s(this.user.username))]),(this.$store.getters.isAuthenticated)?_c('div',[(this.$store.getters.userState.user.id != this.user.id)?_c('div',[(this.$store.getters.userState.user.following.includes(this.user.id))?_c('div',[_c('button',{staticClass:\"btn btn-primary mb-1\",on:{\"click\":_vm.unfollowUser}},[_vm._v(\"Unfollow\")])]):_c('div',[_c('button',{staticClass:\"btn btn-primary mb-1\",on:{\"click\":_vm.followUser}},[_vm._v(\"Follow\")])])]):_vm._e()]):_vm._e()]),_c('h6',{staticClass:\"mt-2 font-italic\"},[_vm._v(_vm._s(this.user.bio))])]),_c('div',{attrs:{\"id\":\"message-div\"}},[(_vm.messages.length !== 0)?_c('div',{staticClass:\"pt-2\"},_vm._l((_vm.messages),function(message){return _c('div',{key:message.id,staticClass:\"bordered-top\"},[_c('MessagePreview',{attrs:{\"message\":message,\"user\":_vm.user},on:{\"forwarded-liked-event\":function($event){return _vm.fetchUserMessages(_vm.user.id)},\"forwarded-unliked-event\":function($event){return _vm.fetchUserMessages(_vm.user.id)},\"forwarded-auth-event\":_vm.showModal}})],1)}),0):_c('div',{staticClass:\"bordered-top row justify-content-center pt-4\"},[_c('p',{staticClass:\"square centerd\"},[_vm._v(\"No messages yet\")])])]),_c('AuthModal')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"mx-auto vh-100\">\n        <div>\n            <h1 class=\"display-4\">{{ this.user.name }} {{ this.user.surname }}</h1>\n            <div>\n                <h4>@{{ this.user.username }}</h4>\n                <div v-if=\"this.$store.getters.isAuthenticated\">\n                    <div v-if=\"this.$store.getters.userState.user.id != this.user.id\">\n                        <div v-if=\"this.$store.getters.userState.user.following.includes(this.user.id)\">\n                            <button class=\"btn btn-primary mb-1\" @click=\"unfollowUser\">Unfollow</button>\n                        </div>\n                        <div v-else>\n                            <button class=\"btn btn-primary mb-1\" @click=\"followUser\">Follow</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <h6 class=\"mt-2 font-italic\">{{ this.user.bio }}</h6>\n        </div>\n        <div id=\"message-div\">\n            <div class=\"pt-2\" v-if=\"messages.length !== 0\">\n                <div class=\"bordered-top\" v-for=\"message in messages\" :key=\"message.id\">\n                    <MessagePreview :message=\"message\" :user=\"user\" @forwarded-liked-event=\"fetchUserMessages(user.id)\"\n                        @forwarded-unliked-event=\"fetchUserMessages(user.id)\" @forwarded-auth-event=\"showModal\" />\n                </div>\n            </div>\n            <div v-else class=\"bordered-top row justify-content-center pt-4\">\n                <p class=\"square centerd\">No messages yet</p>\n            </div>\n        </div>\n        <AuthModal />\n    </div>\n</template>\n\n<script>\nimport MessagePreview from \"../components/MessagePreview.vue\";\nimport AuthModal from \"../components/AuthModal.vue\";\n\nexport default {\n    data() {\n        return {\n            user: {},\n            messages: [],\n        }\n    },\n    components: {\n        AuthModal,\n        MessagePreview\n    },\n    watch: {\n        \"$route.query\": {\n            handler(obj) {\n                this.user = {};\n                this.messages = [];\n                this.fetchUser(obj.id);\n                this.fetchUserMessages(obj.id);\n            },\n            immediate: true,\n        },\n    },\n    methods: {\n        async fetchUser(id) {\n            const res = await fetchApi(\"/social/users/\" + id, {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n            });\n            if (res.ok) {\n                let userJson = await res.json();\n                this.user = userJson.user;\n                let documentTitle = document.title.replace(\"User\", \"@\" + this.user.username);\n                document.title = documentTitle;\n            } else if (res.status !== 404) {\n                this.$router.push({ path: \"/error\" }).catch(() => { });\n            }\n        },\n        async fetchUserMessages(id) {\n            const res = await fetchApi(\"/social/messages/\" + id, {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n            });\n            if (res.ok) {\n                let messagesJson = await res.json();\n                this.messages = messagesJson.messages.reverse();\n            } else if (res.status !== 404) {\n                this.$router.push({ path: \"/error\" }).catch(() => { });\n            }\n        },\n        async followUser() {\n            const res = await fetchApi(\"/social/followers/\" + this.user.id, {\n                method: \"POST\",\n                credentials: \"include\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n            });\n            if (res.ok) {\n                await this.$store.dispatch(\"verifyAuthentication\");\n            } else if (res.status !== 404) {\n                this.$router.push({ path: \"/error\" }).catch(() => { });\n            }\n        },\n        async unfollowUser() {\n            const res = await fetchApi(\"/social/followers/\" + this.user.id, {\n                method: \"DELETE\",\n                credentials: \"include\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n            });\n            if (res.ok) {\n                await this.$store.dispatch(\"verifyAuthentication\");\n            } else if (res.status === 404) {\n                this.isEmpty = true;\n            } else if (res.status !== 404) {\n                this.$router.push({ path: \"/error\" }).catch(() => { });\n            }\n        },\n        async reloadData() {\n            await this.fetchUserMessages(this.user.id);\n        },\n        showModal() {\n            this.$bvModal.show(\"no-auth\")\n        }\n    }\n}\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=7577b070&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","staticClass","staticStyle","_v","staticRenderFns","script","component","_s","user","name","surname","username","$store","getters","isAuthenticated","userState","id","following","includes","on","unfollowUser","followUser","_e","bio","messages","length","_l","message","key","$event","fetchUserMessages","showModal","data","components","AuthModal","MessagePreview","watch","handler","immediate","methods","method","headers","document","path","credentials"],"sourceRoot":""}