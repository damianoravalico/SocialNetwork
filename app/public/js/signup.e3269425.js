"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[830],{671:function(s,e,r){r.r(e),r.d(e,{default:function(){return l}});var t=function(){var s=this,e=s._self._c;return e("div",{attrs:{id:"wrapper"}},[e("h1",{staticClass:"display-4"},[s._v("Create your account")]),e("b-form",{on:{submit:function(e){return e.preventDefault(),s.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"w-50"},[e("b-form-group",{attrs:{label:"Enter your name"}},[e("b-form-input",{attrs:{id:"name",placeholder:"Name"},model:{value:s.form.name,callback:function(e){s.$set(s.form,"name",e)},expression:"form.name"}})],1)],1),e("div",{staticClass:"w-50"},[e("b-form-group",{attrs:{label:"Enter your surname"}},[e("b-form-input",{attrs:{id:"surname",placeholder:"Surname"},model:{value:s.form.surname,callback:function(e){s.$set(s.form,"surname",e)},expression:"form.surname"}})],1)],1)])]),e("b-form-group",{attrs:{label:"Choose your username"}},[e("b-form-input",{attrs:{id:"username",placeholder:"Username"},on:{input:function(e){return s.checkUsername(s.form.username)}},model:{value:s.form.username,callback:function(e){s.$set(s.form,"username",e)},expression:"form.username"}})],1),e("b-form-group",{attrs:{label:"Create a password"}},[e("b-form-input",{attrs:{id:"password",type:"password",placeholder:"Password"},model:{value:s.form.password,callback:function(e){s.$set(s.form,"password",e)},expression:"form.password"}})],1),e("b-form-group",{attrs:{label:"Confirm the password"}},[e("b-form-input",{attrs:{id:"confirmPassword",type:"password",placeholder:"Confirm password"},on:{input:s.arePasswordsMatch},model:{value:s.form.confirmPassword,callback:function(e){s.$set(s.form,"confirmPassword",e)},expression:"form.confirmPassword"}})],1),e("b-form-group",{attrs:{label:"You can choose to share some information about you"}},[e("b-form-textarea",{attrs:{"no-resize":"",id:"bio",placeholder:"Enter something..."},model:{value:s.form.bio,callback:function(e){s.$set(s.form,"bio",e)},expression:"form.bio"}})],1),e("button",{staticClass:"btn btn-primary w-100",attrs:{type:"submit",disabled:!s.isComplete}},[s._v("Sign up")])],1),e("div",{staticClass:"mt-2"},s._l(s.errors,(function(r,t){return e("div",{directives:[{name:"show",rawName:"v-show",value:0!==s.errors.length,expression:"errors.length !== 0"}],key:t},[e("small",{staticClass:"block text-danger",attrs:{id:"passwordError"}},[s._v(" "+s._s(r)+" ")])])})),0)],1)},a=[],o=(r(7658),{data(){return{form:{name:"",surname:"",username:"",password:"",confirmPassword:"",bio:""},errors:[]}},computed:{isComplete(){return""!==this.form.name&&""!==this.form.surname&&""!==this.form.password&&""!==this.form.confirmPassword}},methods:{async onSubmit(){const s={name:this.form.name,surname:this.form.surname,username:this.form.username,password:this.form.password,confirmPassword:this.form.confirmPassword,bio:this.form.bio};for(let r in s)document.getElementById(r).classList.remove("is-invalid");const e=await fetchApi("/auth/signup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(e.ok)this.$router.replace({path:"/"});else if(400===e.status){const s=await e.json(),r=s.error,t=[];for(let e in r)document.getElementById(r[e].param).classList.add("is-invalid"),t.push(r[e].msg);this.errors=t}else 404!==e.status&&this.$router.push({path:"/error"}).catch((()=>{}))},checkUsername(s){let e=new XMLHttpRequest,r=!0;e.onreadystatechange=()=>{if(4===e.readyState){if(200===e.status){const t=JSON.parse(e.responseText),a=t.users;for(let e in a)if(s.toLowerCase()===a[e].username.toLowerCase()){r=!1;break}document.getElementById("username").classList.add("is-invalid"),document.getElementById("username").classList.remove("is-valid")}else 404===e.status?r=!0:400===e.status&&(r=!1);r?(document.getElementById("username").classList.add("is-valid"),document.getElementById("username").classList.remove("is-invalid")):(document.getElementById("username").classList.add("is-invalid"),document.getElementById("username").classList.remove("is-valid"))}};const t="http://localhost:3000/api/social/search?q=".concat(s);e.open("GET",t,!0),e.send()},arePasswordsMatch(){return""!==this.form.password&&""!==this.form.confirmPassword&&this.form.password!==this.form.confirmPassword?(document.getElementById("confirmPassword").classList.add("is-invalid"),!1):(document.getElementById("confirmPassword").classList.remove("is-invalid"),!0)}}}),n=o,i=r(1001),m=(0,i.Z)(n,t,a,!1,null,"f0217858",null),l=m.exports}}]);
//# sourceMappingURL=signup.e3269425.js.map