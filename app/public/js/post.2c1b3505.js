"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[913],{8819:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"vh-100"},[e("h1",{staticClass:"display-4"},[t._v("Create a post")]),e("b-form",{on:{submit:function(e){return e.preventDefault(),t.postMessage.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"Create a post of arbitrary length and share it"}},[e("b-form-textarea",{attrs:{rows:"8","no-resize":"",placeholder:"What are you thinking about?"},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}})],1),e("button",{staticClass:"btn btn-primary w-100",attrs:{type:"submit",disabled:t.isEmpty}},[t._v("Share it!")]),e("div",{staticClass:"mt-2"},t._l(t.errors,(function(s,r){return e("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.errors.length,expression:"errors.length !== 0"}],key:r},[e("small",{staticClass:"block text-danger",attrs:{id:"passwordError"}},[t._v(" "+t._s(s)+" ")])])})),0)],1)],1)},a=[],o=(s(7658),{data(){return{form:{text:""},errors:[]}},computed:{isEmpty(){return""===this.form.text}},methods:{async postMessage(){const t=await fetchApi("/social/messages",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:this.form.text})});if(t.ok)this.$router.push({path:"/"}).catch((()=>{}));else if(400===t.status){const e=await t.json(),s=e.error,r=[];for(let t in s)r.push(s[t].msg);this.errors=r}else this.$router.push({path:"/error"}).catch((()=>{}))}}}),n=o,i=s(1001),l=(0,i.Z)(n,r,a,!1,null,null,null),u=l.exports}}]);
//# sourceMappingURL=post.2c1b3505.js.map